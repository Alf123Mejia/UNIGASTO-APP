<div class="transactions-container">
  <div class="tabs">
    <button (click)="setFilter('Diario')" [class.active]="activeFilter() === 'Diario'">Diario</button>
    <button (click)="setFilter('Semanal')" [class.active]="activeFilter() === 'Semanal'">Semanal</button>
    <button (click)="setFilter('Mensual')" [class.active]="activeFilter() === 'Mensual'">Mensual</button>
  </div>

  <div *ngIf="activeFilter() === 'Mensual'" class="month-navigator">
    <button (click)="goToPreviousMonth()" class="nav-button">
      <i class="fas fa-chevron-left"></i>
    </button>
    <span class="month-display">{{ displayedMonth() | date:'LLLL yyyy' }}</span>
    <button (click)="goToNextMonth()" class="nav-button" [disabled]="isNextMonthDisabled()">
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>

  <div class="transaction-list">
    <ng-container *ngFor="let transaction of filteredTransactions()">
      <div class="transaction-item" *ngIf="!editingTransaction || editingTransaction.id !== transaction.id">
        <div class="left">
          <div class="icon" [style.background-color]="transaction.iconColor">
            <i [class]="transaction.icon"></i>
          </div>
          <div class="details">
            <p class="description">{{ transaction.description }}</p>
            <p class="date">{{ transaction.date | date:'short' }}</p>
          </div>
        </div>
        <div class="right">
          <span class="amount" [class]="getAmountClass(transaction.amount)">
            {{ transaction.amount | number:'1.2-2' }}
          </span>
          <p class="category">{{ transaction.category }}</p>
          <div class="actions">
            <button class="edit-btn" (click)="editTransaction(transaction)">
              <i class="fas fa-edit"></i>
            </button>
            <button class="delete-btn" (click)="deleteTransaction(transaction.id)">
              <i class="fas fa-trash-alt"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="transaction-form" *ngIf="editingTransaction && editingTransaction.id === transaction.id">
        <input type="text" [(ngModel)]="editedTransaction.description" placeholder="Descripción">
        <input type="number" [(ngModel)]="editedTransaction.amount" placeholder="Monto">
        <div class="actions">
          <button (click)="saveChanges()">Guardar</button>
          <button (click)="cancelEdit()">Cancelar</button>
        </div>
      </div>
    </ng-container>

    <div *ngIf="filteredTransactions().length === 0" class="no-transactions-message">
      <p>No hay transacciones para este período.</p>
    </div>
  </div>
</div>